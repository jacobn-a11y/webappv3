# Database (matches docker-compose.yml defaults)
DATABASE_URL="postgresql://storyengine:storyengine_dev@localhost:5432/storyengine"

# Redis (BullMQ job queue)
REDIS_URL="redis://localhost:6379"

# ─── Merge.dev (Unified API — OPTIONAL, disabled by default) ────────────────
# Merge.dev is only used when an IntegrationConfig with provider=MERGE_DEV
# is created and enabled for an org. For the pilot, use direct integrations
# (Grain, Gong, SFDC) instead. Re-enable Merge.dev later for multi-provider use.
MERGE_API_KEY=""
MERGE_ACCOUNT_TOKEN=""                    # Legacy: per-linked-account tokens are now stored in the database
MERGE_WEBHOOK_SECRET=""

# ─── Direct Integrations ────────────────────────────────────────────────────
# Credentials for Grain, Gong, and Salesforce are stored per-organization in
# the IntegrationConfig database table (not as env vars). Configure them via:
#   POST /api/integrations { provider: "GONG", credentials: { accessKey: "...", accessKeySecret: "..." } }
#   POST /api/integrations { provider: "GRAIN", credentials: { apiToken: "..." } }
#   POST /api/integrations { provider: "SALESFORCE", credentials: { instanceUrl: "...", ... } }
#
# Then validate with: POST /api/integrations/:provider/test
# And trigger initial sync: POST /api/integrations/:provider/sync

# Integration sync interval (how often to poll Grain/Gong/SFDC for new data)
SYNC_INTERVAL_MINUTES=15

# ─── AI / LLM ──────────────────────────────────────────────────────────────
# OpenAI (LLM for tagging, summarization, embeddings)
OPENAI_API_KEY=""

# Pinecone (Vector DB for transcript embeddings)
PINECONE_API_KEY=""
PINECONE_INDEX="storyengine-transcripts"

# ─── Auth ───────────────────────────────────────────────────────────────────
# WorkOS (Auth - Google SSO + Email)
WORKOS_API_KEY=""
WORKOS_CLIENT_ID=""
WORKOS_REDIRECT_URI="http://localhost:3000/api/auth/callback"

# ─── Billing ────────────────────────────────────────────────────────────────
# Stripe (Billing)
STRIPE_SECRET_KEY=""
STRIPE_WEBHOOK_SECRET=""
STRIPE_STARTER_PRICE_ID=""        # Metered price: $0.05/transcript minute
STRIPE_PROFESSIONAL_PRICE_ID=""   # Metered price: $0.03/transcript minute
STRIPE_ENTERPRISE_PRICE_ID=""     # Custom metered price (optional — omit to route to sales)

# ─── App ────────────────────────────────────────────────────────────────────
PORT=3000
NODE_ENV="development"
APP_URL="http://localhost:3000"
REDIS_URL="redis://localhost:6379"
